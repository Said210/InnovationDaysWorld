<% if user_signed_in? %>
  <% if user_signed_in? && !project.is_participating?(current_user) %>

    <%= button_to 'Join Project', join_project_path(project), method: :post, class: "rounded-lg py-3 ml-2 px-5 bg-gray-100 inline-block font-medium join-project-button", data: {project_id: project.id}  %>

  <% else %>

    <% if user_signed_in? && project.is_participating?(current_user) %>
      <%= button_to 'Leave project', leave_project_path(project), method: :post, class: "rounded-lg py-3 ml-2 px-5 bg-gray-100 inline-block font-medium bg-red-100",  data: {project_id: project.id}   %>
      <%# button to visit join project with post %>
    <% else %>
      <%= link_to 'Sign in to join', new_user_session_path, class: "rounded-lg py-3 ml-2 px-5 bg-gray-100 inline-block font-medium" %>
    <% end %>

  <% end %>

<% else %>
  <%= link_to 'Sign in to join', new_user_session_path, class: "rounded-lg py-3 ml-2 px-5 bg-gray-100 inline-block font-medium" %>
  <%#= button_to 'Vote Project', vote_project_path(project), method: :post, class: "rounded-lg py-3 ml-2 px-5 bg-gray-100 inline-block font-medium join-project-button", data: {project_id: project.id}  %>

<% end %>